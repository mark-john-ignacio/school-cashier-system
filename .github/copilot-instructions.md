# AI contributor guide for this repo

This is a Laravel 12 + Inertia.js (React 19 + TypeScript) app, built with Vite, Tailwind v4, and shadcn/ui-style components (Radix UI + Tailwind). It ships with SSR, typed client-side routes, and generated action helpers.

## Big picture

- Server routes/controllers render Inertia pages:
    - PHP routes live in `routes/` (`web.php`, `auth.php`, `settings.php`).
    - Controllers in `app/Http/Controllers/**` return `Inertia::render('<dir>/<page>')` that maps to `resources/js/pages/<dir>/<page>.tsx`.
    - Root layout is `resources/views/app.blade.php` which loads Vite and the current page bundle via `@vite(['resources/js/app.tsx', "resources/js/pages/{$page['component']}.tsx"])`.
- Front-end bootstraps Inertia:
    - `resources/js/app.tsx` with `createInertiaApp` and React 19. `resources/js/ssr.tsx` for server rendering.
- Typed client routing and actions (Wayfinder):
    - `resources/js/routes/**` exports typed helpers for named routes (e.g. `home()`, `dashboard()`, `appearance()`), generated from PHP routes.
    - `resources/js/actions/**` exports controller action endpoints with `.form()` helpers for Inertia `<Form>` usage (e.g. `PasswordResetLinkController.store.form()`).
    - Helpers are generated by `@laravel/vite-plugin-wayfinder` and `laravel/wayfinder` (see `vite.config.ts`). Keep Vite running to regenerate when routes/controllers change.

## Conventions and patterns to follow

- Pages and naming:
    - The string passed to `Inertia::render('settings/appearance')` must match `resources/js/pages/settings/appearance.tsx`.
    - In React, set titles via `<Head title="..." />` (see `pages/dashboard.tsx`).
- Routing on the client:
    - Import from `@/routes` for simple route links, e.g. `Link href={dashboard()}` or `Link href={dashboard().url}`.
    - Import from `@/actions/...` for form endpoints, e.g. `<Form {...PasswordResetLinkController.store.form()}>` (see `pages/auth/forgot-password.tsx`).
    - Prefer these helpers over string paths for type-safety and query building (`resources/js/wayfinder/index.ts`).
- Layouts:
    - Use shared layouts in `resources/js/layouts/**` (e.g. `AppLayout` wraps app chrome; `layouts/settings/layout.tsx` builds the settings nav using typed routes).
- Styling and theming:
    - Tailwind v4 via `@tailwindcss/vite`. Theme appearance is controlled by `resources/js/hooks/use-appearance.tsx` and an inline script in `app.blade.php` to avoid FOUC. Call `initializeTheme()` in `app.tsx` (already done).
    - UI framework: shadcn/ui patterns using Radix primitives (`@radix-ui/react-*`), `class-variance-authority`, `tailwind-merge`, `tailwindcss-animate`, and `lucide-react`. Components live in `resources/js/components/**`.
- TypeScript:
    - Strict TS with path alias `@/*` to `resources/js/*` (see `tsconfig.json`). `resources/js/types/index.d.ts` augments some shared types used in links and breadcrumbs.

## Day-to-day workflows (Windows PowerShell)

- Start app (PHP server, queue worker, Vite):
    ```powershell
    composer run dev
    ```
- Start with SSR + logs (builds SSR first, then runs server, queue, pail logs, and SSR server on 127.0.0.1:13714):
    ```powershell
    composer run dev:ssr
    ```
- Build assets (CSR + SSR):
    ```powershell
    npm run build ; npm run build:ssr
    ```
- Tests (Pest):
    ```powershell
    composer test
    ```
- Lint/format/types:
    ```powershell
    npm run lint ; npm run format:check ; npm run types
    ```

## Adding a new page/route quickly

1. Add a route and controller action in PHP (e.g. `routes/web.php`), return `Inertia::render('reports/index')`.
2. Create `resources/js/pages/reports/index.tsx` and export a default React component. Use `<Head />`, shared layouts, etc.
3. Use typed helpers:
    - Link to it via `import { reportsIndex } from '@/routes'` then `<Link href={reportsIndex()} />`.
    - For POST/PUT/DELETE, use controller action forms from `@/actions/...`: `<Form {...ReportsController.store.form()}>`.
4. Keep Vite running so Wayfinder regenerates the TS helpers as you change PHP routes/controllers.

## Integration points worth knowing

- Inertia SSR: enabled in `config/inertia.php` at `http://127.0.0.1:13714`. The `dev:ssr` composer script starts `php artisan inertia:start-ssr` and `php artisan pail` for live logs.
- Authentication flows: routes defined in `routes/auth.php`, pages in `resources/js/pages/auth/**`, and controller forms in `resources/js/actions/App/Http/Controllers/Auth/**`.
- Settings flows: routes in `routes/settings.php` (`profile.*`, `password.*`, `appearance`), pages in `resources/js/pages/settings/**`, nav in `layouts/settings/layout.tsx` using typed route helpers.

## Example snippets (from this repo)

- Link to dashboard (typed): `Link href={dashboard()}` in `pages/dashboard.tsx`.
- Settings nav item: `{ title: 'Appearance', href: appearance() }` in `layouts/settings/layout.tsx`.
- Forgot password form: `<Form {...PasswordResetLinkController.store.form()}>` in `pages/auth/forgot-password.tsx`.

## Key files

- Vite/SSR: `vite.config.ts`, `resources/js/app.tsx`, `resources/js/ssr.tsx`, `config/inertia.php`.
- Routing helpers: `resources/js/routes/**`, `resources/js/actions/**`, `resources/js/wayfinder/index.ts`.
- Layout: `resources/views/app.blade.php`, `resources/js/layouts/**`.
- Tests: `tests/Feature/**` (Pest), DB: `database/database.sqlite`.

If anything here is unclear or you spot gaps (e.g., additional domain modules or unusual build steps), tell me and Iâ€™ll tighten these instructions.
